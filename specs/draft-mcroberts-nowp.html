<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Protocol for media devices to expose Now Playing information (NOWP) on local networks</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Protocol for media devices to expose Now Playing information (NOWP) on local networks">
<meta name="keywords" content="I-D, Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: small; color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: small; font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: small; text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. McRoberts</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Project Baird</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">July 8, 2010</td></tr>
<tr><td class="header">Expires: January 9, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Protocol for media devices to expose Now Playing information (NOWP) on local networks<br />draft-mcroberts-nowp-00</h1>

<h3>Abstract</h3>

<p>
				This document describes a protocol which allows network-connected media devices,
				such as televisions, set-top boxes and radios, to be queried for URIs relating
				to the content they are currently playing.
			
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 9, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>

<a name="anchor1"></a><br /><hr />
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
				As media receivers (and other devices) such as televisions and radios gain the
				ability to communicate on local networks, a class of applications has arisen
				which depends, at least in part, on being able to query a media device for
				information about the programme or service it is currently playing.
			
</p>
<p>
				This document sets out a simple protocol which allows:
				</p>
<ul class="text">
<li>
						media devices to advertise the availability of this service to other
						devices on a local network; and
					
</li>
<li>
						media devices to be easily queried for "Now playing" information
					
</li>
</ul><p>				
			
</p>
<p>
				Rather than be reliant upon the many different ways in which a piece of content
				might be described, the NOWP protocol instead relies on content and services
				having one or more identifiers -- in the form of URIs -- which can be relayed
				between devices and dereferenced as required.
			
</p>
<p>
				It is anticipated that implementation the NOWP protocol will often (although not
				necessarily always) form part of broader functionality to allow remote control
				and introspection of a device. For this reason, the NOWP protocol is based upon
				HTTP <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> and can co-exist with most other HTTP-based
				applications.
			
</p>
<a name="anchor2"></a><br /><hr />
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions and terminology used in this document</h3>

<p>
				The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
				"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
				document are to be interpreted as described in "Key words for use in
				RFCs to Indicate Requirement Levels" <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>
			
</p>
<a name="anchor3"></a><br /><hr />
<a name="rfc.section.3"></a><h3>3.&nbsp;
Advertisment</h3>

<p>
				The NOWP protocol is advertised to other devices on a local network using
				Multicast DNS <a class='info' href='#I-D.cheshire-dnsext-multicastdns'>[I&#8209;D.cheshire&#8209;dnsext&#8209;multicastdns]<span> (</span><span class='info'>Cheshire, S. and M. Krochmal, &ldquo;Multicast DNS,&rdquo; March&nbsp;2010.</span><span>)</span></a> in
				combination with DNS-based Service Discovery <a class='info' href='#I-D.cheshire-dnsext-dns-sd'>[I&#8209;D.cheshire&#8209;dnsext&#8209;dns&#8209;sd]<span> (</span><span class='info'>Cheshire, S. and M. Krochmal, &ldquo;DNS-Based Service Discovery,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
			
</p>
<p>
				This document defines a service type <a class='info' href='#DNSSD-SRV'>[DNSSD&#8209;SRV]<span> (</span><span class='info'>, &ldquo;DNS SRV (RFC 2782) Service Types,&rdquo; .</span><span>)</span></a> of "nowp".
				That is, registrations occur using the name "_nowp._tcp" and SHOULD by
				default be restricted to the link-local scope. Devices SHOULD make the service
				available via both IPv4 and IPv6 and advertise the service accordingly.
				The NOWP protocol specification places no particular requirement upon port
				numbering. Devices SHOULD allow the host name used in advertisements to be
				customised by the device's owner where possible.
			
</p>
<p>
				Service advertisements MUST include a TXT record whose data is in the following format:
			
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
txt-record  =  "txtvers=1 path=" path-absolute
</pre></div>
<p>
				Clients MUST disregard advertisements which do not include a TXT record.
				Clients MUST disregard advertisements which do not match the above format,
				including where the value of the txtvers parameter is not "1".
			
</p>
<a name="anchor4"></a><br /><hr />
<a name="rfc.section.4"></a><h3>4.&nbsp;
Now Playing inquiry request</h3>

<p>
				Once a client has discovered a device advertising the NOWP protocol, it may
				connect to it in order to inquire as to the media currently playing on the
				device.
			
</p>
<p>
				The request takes the form of an ordinary HTTP request, where:
				</p>
<ul class="text">
<li>
						The Host request header MUST be specified as the fully-qualified domain name
						of the PTR record advertised by the device.
					
</li>
<li>
						The HTTP method used MUST be "GET"
					
</li>
<li>
						The request path is the value of the "path" parameter from the advertisement's TXT record.
					
</li>
<li>
						Clients SHOULD request that the connection is kept alive (via the
						"Connection: keep-alive" request header) where repeated periodic
						queries are anticipated.
					
</li>
</ul><p>
			
</p>
<a name="anchor5"></a><br /><hr />
<a name="rfc.section.5"></a><h3>5.&nbsp;
Now Playing inquiry response</h3>

<p>
				Devices respond to the Now Playing inquiry request with an HTTP 2xx status
				code. Devices MAY include a response body, but SHOULD respond with a "204 No
				Content" status if none is included. Clients MUST consider any 2xx or 3xx status
				code as indicative of a successful response.
			
</p>
<p>
				For the purposes of the NOWP protocol, clients MUST ignore any response body,
				and MUST NOT follow URIs given in any "Location" response headers which might
				be returned.
			
</p>
<p>
				Devices relay URIs to clients by means of a "Link" response header
				<a class='info' href='#I-D.nottingham-http-link-header'>[I&#8209;D.nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; May&nbsp;2010.</span><span>)</span></a>. The NOWP protocol
				specifies two Link Relation values which SHALL be used:
				</p>
<blockquote class="text"><dl>
<dt>http://projectbaird.com/ns/service</dt>
<dd>
						This relation indicates that the linked resource is a service URI --
						that is, a URI which identifies a service which delivers content to
						the device, such as a television station or a podcast.
					
</dd>
<dt>http://projectbaird.com/ns/event</dt>
<dd>
						This relation indicates that the linked resource identifies a
						particular event, such as a radio programme or a locally-stored
						video file.
					
</dd>
</dl></blockquote><p>
			
</p>
<p>
				Devices MAY provide multiple URIs for a service or event but MUST
				NOT provide URIs for more than one service or more than one event.
				Devices MAY omit URIs for either current service, current event, or
				both. Devices SHOULD NOT include URIs with link relations of either
				http://projectbaird.com/ns/service or http://projectbaird.com/ns/event
				where the URI is known not to be meaningful beyond the device itself
				except where the device provides some other service which might make
				use of that URI in order to provide further information about the
				service or resource.
			
</p>
<p>
				Links with a relation of http://projectbaird.com/ns/event MAY include
				two additional parameters, described below. Devices SHOULD include
				these parameters if the relevant information is available, but MAY
				omit either or both of them.
				</p>
<blockquote class="text"><dl>
<dt>scheduledStart</dt>
<dd>
						Specifies that the event, which was (or is being) received
						from a linear broadcast medium had a start time specified
						in the device's Electronic Programme Guide (EPG) as
						indicated by the value of the parameter. The parameter is
						a Datetime value in the format described below.
					
</dd>
<dt>scheduledDuration</dt>
<dd>
						Specifies that the event has a duration specified in the
						device's Electronic Programme Guide as indicated by the
						value of the parameter. The parameter is a Duration value
						in the format described below.
					
</dd>
</dl></blockquote><p>
			
</p>
<a name="anchor6"></a><br /><hr />
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Datetime value format</h3>

<p>
					The Datetime format is a compatible subset of the combined date
					and time format described in Chapter 5 of ISO 8601 and has the
					format:
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
datetime  =  date "T" time "Z"

date      =  year "-" month "-" day

time      =  hour ":" minute [ ":" "second" ]

year      =  4 DIGIT

month     =  2 DIGIT

day       =  2 DIGIT

hour      =  2 DIGIT

minute    =  2 DIGIT

second    =  2 DIGIT
</pre></div>
<a name="anchor7"></a><br /><hr />
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Duration value format</h3>

<a name="anchor8"></a><br /><hr />
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Service and event URIs</h3>

<p>
					The exact nature of a service or event URI is, in effect, an
					implementation detail, but some guidelines are given here.
				
</p>
<p>
					Service URIs are intended to allow the identification by
					devices other than the receiver of the service, and in particular
					by Internet-based applications which those devices might
					communicate with. A service which is delivered by way of
					DVB-T transmissions might use a URI which is made up of
					identifying values embedded in the transmissions themselves;
					a service delivered using RTP via multicast IP might instead
					be identified by the advertised URL of the SDP document
					describing the stream.
				
</p>
<a name="anchor9"></a><br /><hr />
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Examples</h3>

<a name="rfc.references1"></a><br /><hr />
<h3>6.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.cheshire-dnsext-dns-sd">[I-D.cheshire-dnsext-dns-sd]</a></td>
<td class="author-text">Cheshire, S. and M. Krochmal, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-cheshire-dnsext-dns-sd-06.txt">DNS-Based Service Discovery</a>,&rdquo; draft-cheshire-dnsext-dns-sd-06 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-cheshire-dnsext-dns-sd-06.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.cheshire-dnsext-multicastdns">[I-D.cheshire-dnsext-multicastdns]</a></td>
<td class="author-text">Cheshire, S. and M. Krochmal, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-cheshire-dnsext-multicastdns-11.txt">Multicast DNS</a>,&rdquo; draft-cheshire-dnsext-multicastdns-11 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-cheshire-dnsext-multicastdns-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.nottingham-http-link-header">[I-D.nottingham-http-link-header]</a></td>
<td class="author-text">Nottingham, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-nottingham-http-link-header-10.txt">Web Linking</a>,&rdquo; draft-nottingham-http-link-header-10 (work in progress), May&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-nottingham-http-link-header-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="DNSSD-SRV">[DNSSD-SRV]</a></td>
<td class="author-text">&ldquo;<a href="http://www.dns-sd.org/ServiceTypes.html">DNS SRV (RFC 2782) Service Types</a>.&rdquo;</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mo McRoberts</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Project Baird</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mo.mcroberts@nexgenta.com">mo.mcroberts@nexgenta.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://projectbaird.com/">http://projectbaird.com/</a></td></tr>
</table>
</body></html>
